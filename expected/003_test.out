-- Should return a single job for public.t1
SELECT target, statement FROM plan('{public.t1}');
  target   |      statement       
-----------+----------------------
 public.t1 | CALL tools.start(7);
(1 row)

SELECT run_id, job_id, config_id, lastseq, rows, state
  FROM job WHERE run_id = 3;
 run_id | job_id | config_id | lastseq | rows |  state  
--------+--------+-----------+---------+------+---------
      3 |      7 |         1 |       0 |    0 | pending
(1 row)

-- Should return all jobs
SELECT target, statement FROM plan();
  target   |       statement       
-----------+-----------------------
 public.t2 | CALL tools.start(9);
 public.t2 | CALL tools.start(10);
 public.t1 | CALL tools.start(8);
(3 rows)

SELECT run_id, job_id, config_id, lastseq, rows, state
  FROM job WHERE run_id = 4;
 run_id | job_id | config_id | lastseq | rows |  state  
--------+--------+-----------+---------+------+---------
      4 |      8 |         1 |       0 |    0 | pending
      4 |      9 |         2 |    2000 |    0 | pending
      4 |     10 |         3 |    1999 |    0 | pending
(3 rows)

-- Should fail as the table does not exist
SELECT target, statement FROM plan('{public.foo}');
ERROR:  relation "public.foo" does not exist
CONTEXT:  SQL function "plan" statement 1
-- Should return an empty set as the table has no configuration
SELECT target, statement FROM plan('{public.dummy}');
 target | statement 
--------+-----------
(0 rows)

